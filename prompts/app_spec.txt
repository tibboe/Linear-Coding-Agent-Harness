<project_specification>
  <project_name>GameOn - Sports Matchmaking Platform MVP</project_name>

  <overview>
    Build a sports matchmaking platform that connects recreational players with similar skill levels to organize
    and play games together. The platform solves the "cold start problem" in sports app adoption by helping
    convert existing WhatsApp-based pickup games to a more robust digital platform. Players register their
    interests, skills, and availability to join a matchmaking pool. The app acts as a lobby where users host
    games, join others, rate players post-game, and venues can offer their facilities. Initial focus on one
    city and three sports (basketball, soccer, tennis) to prove the core concept before expanding.
  </overview>

  <technology_stack>
    <frontend>
      <framework>Next.js 14 with App Router and TypeScript</framework>
      <styling>Tailwind CSS with shadcn/ui components</styling>
      <state_management>Zustand for global state, TanStack Query for server state</state_management>
      <routing>Next.js App Router with route groups</routing>
      <forms>React Hook Form with Zod validation</forms>
      <maps>Google Maps API or Mapbox for location features</maps>
      <port>Development on port 3000</port>
    </frontend>
    <backend>
      <runtime>Next.js API Routes (serverless functions)</runtime>
      <database>Supabase (PostgreSQL with Row Level Security)</database>
      <authentication>Supabase Auth with email/password and OAuth</authentication>
      <payments>Stripe for game payments and platform fees</payments>
      <file_storage>Supabase Storage for profile photos and venue images</file_storage>
      <geospatial>PostGIS extension for location-based queries</geospatial>
    </backend>
    <communication>
      <api>RESTful endpoints via Next.js API routes</api>
      <realtime>Supabase Realtime for game updates (Phase 2)</realtime>
      <notifications>Email via Supabase triggers, Push via OneSignal (Phase 2)</notifications>
    </communication>
  </technology_stack>

  <prerequisites>
    <environment_setup>
      - Supabase project created with PostGIS extension enabled
      - Stripe account with test API keys configured
      - Google Maps API key for location services
      - Environment variables configured in .env.local:
        - NEXT_PUBLIC_SUPABASE_URL
        - NEXT_PUBLIC_SUPABASE_ANON_KEY
        - SUPABASE_SERVICE_ROLE_KEY
        - STRIPE_SECRET_KEY
        - NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY
        - STRIPE_WEBHOOK_SECRET
        - NEXT_PUBLIC_GOOGLE_MAPS_API_KEY
    </environment_setup>
  </prerequisites>

  <core_features>
    <player_management>
      - Email/password registration with verification
      - Profile setup: name, location (city/coordinates), phone, bio
      - Profile photo upload with image optimization
      - Sport selection (basketball, soccer, tennis initially)
      - Skill level self-assessment per sport (1-5 scale with descriptions)
      - Years of experience per sport
      - Weekly availability calendar (recurring time slots)
      - View and edit profile at any time
      - Overall player rating display (calculated from peer reviews)
      - Reliability score (based on attendance/no-shows)
      - Games played counter
      - Account settings (email, password, notifications)
    </player_management>

    <game_lobby_system>
      <browse_games>
        - View all available games in card/list view
        - Filter by: sport type, date range, skill level, location radius
        - Sort by: date (soonest), distance (nearest), skill match
        - Visual game cards showing key details at a glance
        - Map view showing game locations
        - Quick preview of host and current participants
        - Real-time player count and spots remaining
        - Game status badges (open, almost full, full)
      </browse_games>

      <create_game>
        - Multi-step form wizard for game creation
        - Select sport from registered sports
        - Choose date and time with calendar picker
        - Set game duration (1hr, 1.5hr, 2hr options)
        - Define skill level range (min-max on 1-5 scale)
        - Select venue from registered venues or mark "TBD"
        - Set maximum number of players
        - Set cost per player (optional, $0-$50 range)
        - Add notes/description for participants
        - Preview game before publishing
        - Edit game details until first player joins
      </create_game>

      <join_game>
        - One-click join request button
        - View game details, host profile, current players
        - Skill level compatibility indicator
        - Host approval required for joining
        - Payment processed upon host approval
        - Email confirmation with game details
        - Add to calendar option (Google/Apple)
        - Cancel request before approval (free)
        - Cancel after approval with penalty policy
      </join_game>

      <game_states>
        - Draft (created but not published)
        - Open (accepting players, spots available)
        - Full (maximum players reached, waitlist available)
        - In Progress (game currently happening)
        - Completed (game finished, ratings pending)
        - Cancelled (by host, refunds processed)
      </game_states>

      <host_controls>
        - View join requests with player profiles
        - Approve or reject players based on skill/ratings
        - Message approved players (email)
        - Cancel game with automatic refunds
        - Mark game as completed
        - Remove problematic players before game
      </host_controls>
    </game_lobby_system>

    <venue_management>
      <venue_registration>
        - Venue owner registration flow
        - Business verification (manual for MVP)
        - Venue details: name, address, description
        - Contact information and website
        - Facility photos (up to 10 images)
        - Amenities checklist (parking, showers, equipment, etc.)
        - Operating hours
      </venue_registration>

      <venue_sports>
        - Configure available sports at venue
        - Set hourly rates per sport/court
        - Define capacity per facility
        - Mark facilities as available/unavailable
        - Seasonal pricing options
      </venue_sports>

      <venue_listing>
        - Public venue directory with search
        - Venue detail pages with photos gallery
        - Available time slots display
        - Sport-specific pricing information
        - Distance from player's location
        - Aggregate venue ratings
        - Upcoming games at venue
      </venue_listing>
    </venue_management>

    <payment_system>
      <stripe_integration>
        - Stripe Connect for marketplace payments
        - Platform fee: 10-15% or $2-5 flat per transaction
        - Payment processing on join approval
        - Secure card storage for returning players
        - Payment receipts via email
      </stripe_integration>

      <cancellation_policy>
        - Full refund if cancelled >24 hours before game
        - 50% refund if cancelled 12-24 hours before
        - No refund if cancelled <12 hours (unless replacement found)
        - Host cancellation triggers full refunds to all players
        - Platform fee retained on player cancellations
      </cancellation_policy>

      <payment_history>
        - View all past transactions
        - Download receipts
        - Refund status tracking
        - Earnings summary for hosts
      </payment_history>
    </payment_system>

    <rating_system>
      <post_game_ratings>
        - Prompt to rate after game completion
        - Rate each participant on three dimensions:
          - Skill accuracy (1-5): Did their play match claimed skill?
          - Reliability (1-5): On time, prepared, communicated
          - Sportsmanship (1-5): Attitude, fair play, friendliness
        - Optional text feedback (private to recipient)
        - Anonymous aggregate display
        - 48-hour window to submit ratings
      </post_game_ratings>

      <venue_ratings>
        - Rate venue after playing there
        - Overall rating (1-5 stars)
        - Specific feedback: cleanliness, facilities, staff
        - Optional comment
        - Photo upload option
      </venue_ratings>

      <rating_display>
        - Player profiles show aggregate ratings
        - Star display with review count
        - Reliability badge for consistent players
        - Venue ratings on listing pages
        - Recent reviews carousel
      </rating_display>
    </rating_system>

    <dashboard_features>
      <player_dashboard>
        - Upcoming games I'm playing in
        - Games I'm hosting
        - Pending join requests (as host)
        - Recent activity feed
        - Games to rate (post-game)
        - Quick stats: games played, avg rating
        - Recommended games based on sport/skill
      </player_dashboard>

      <venue_dashboard>
        - Upcoming bookings calendar view
        - Pending booking requests
        - Revenue summary
        - Recent ratings and reviews
        - Player traffic analytics (basic)
        - Facility management
      </venue_dashboard>
    </dashboard_features>

    <search_and_discovery>
      - Global search for games, players, venues
      - Location-based game discovery
      - Sport category filtering
      - Skill-matched game suggestions
      - "Games near me" quick filter
      - Popular venues in area
      - Featured/promoted games (future)
    </search_and_discovery>

    <notifications_system>
      <email_notifications>
        - Welcome email on registration
        - Game join request received (to host)
        - Join request approved/rejected (to player)
        - Payment confirmation
        - Game reminder (24hr, 2hr before)
        - Game cancelled notification
        - Rating request post-game
        - Weekly digest of nearby games (optional)
      </email_notifications>

      <in_app_notifications>
        - Notification bell in header
        - Unread count badge
        - Notification center dropdown
        - Mark as read functionality
        - Notification preferences in settings
      </in_app_notifications>
    </notifications_system>

    <settings_and_preferences>
      - Account settings (email, password, phone)
      - Profile visibility options
      - Notification preferences (email, push)
      - Default sport and skill display
      - Location settings
      - Delete account option
      - Export personal data (GDPR compliance)
    </settings_and_preferences>

    <responsive_design>
      - Mobile-first responsive layout
      - Touch-optimized interface for all interactions
      - Bottom navigation on mobile
      - Swipe gestures for game cards
      - Progressive Web App (PWA) support
      - Offline indicator
      - Pull-to-refresh on lists
    </responsive_design>

    <accessibility>
      - Full keyboard navigation
      - Screen reader support with ARIA labels
      - High contrast mode support
      - Focus management and indicators
      - Form error announcements
      - Skip navigation links
    </accessibility>
  </core_features>

  <database_schema>
    <tables>
      <players>
        - id (uuid, primary key, references auth.users)
        - email (text, unique, not null)
        - full_name (text, not null)
        - phone (text)
        - bio (text, max 500 chars)
        - avatar_url (text)
        - location_city (text)
        - location_lat (decimal)
        - location_lng (decimal)
        - overall_rating (decimal, default 0)
        - reliability_score (decimal, default 100)
        - total_games_played (integer, default 0)
        - created_at (timestamptz, default now())
        - updated_at (timestamptz)
        - is_venue_owner (boolean, default false)
        - stripe_customer_id (text)
        - notification_preferences (jsonb)
      </players>

      <sports>
        - id (uuid, primary key)
        - name (text, unique, not null) -- basketball, soccer, tennis
        - display_name (text, not null)
        - icon (text) -- icon identifier
        - default_team_size (integer)
        - description (text)
        - is_active (boolean, default true)
      </sports>

      <player_sports>
        - id (uuid, primary key)
        - player_id (uuid, references players, not null)
        - sport_id (uuid, references sports, not null)
        - skill_level (integer, 1-5, not null)
        - years_experience (integer, default 0)
        - is_primary (boolean, default false)
        - created_at (timestamptz, default now())
        - unique constraint (player_id, sport_id)
      </player_sports>

      <player_availability>
        - id (uuid, primary key)
        - player_id (uuid, references players, not null)
        - day_of_week (integer, 0-6, not null) -- 0=Sunday
        - start_time (time, not null)
        - end_time (time, not null)
        - is_active (boolean, default true)
        - created_at (timestamptz, default now())
      </player_availability>

      <venues>
        - id (uuid, primary key)
        - owner_id (uuid, references players)
        - name (text, not null)
        - description (text)
        - address (text, not null)
        - city (text, not null)
        - state (text)
        - postal_code (text)
        - country (text, default 'US')
        - location_lat (decimal, not null)
        - location_lng (decimal, not null)
        - phone (text)
        - email (text)
        - website (text)
        - amenities (jsonb) -- {parking: true, showers: true, ...}
        - images (jsonb) -- array of image URLs
        - operating_hours (jsonb) -- {monday: {open: "06:00", close: "22:00"}, ...}
        - overall_rating (decimal, default 0)
        - total_ratings (integer, default 0)
        - is_verified (boolean, default false)
        - is_active (boolean, default true)
        - created_at (timestamptz, default now())
        - updated_at (timestamptz)
        - stripe_account_id (text)
      </venues>

      <venue_sports>
        - id (uuid, primary key)
        - venue_id (uuid, references venues, not null)
        - sport_id (uuid, references sports, not null)
        - hourly_rate (decimal, not null)
        - capacity (integer, not null) -- max players
        - court_count (integer, default 1)
        - equipment_available (boolean, default false)
        - is_available (boolean, default true)
        - created_at (timestamptz, default now())
        - unique constraint (venue_id, sport_id)
      </venue_sports>

      <games>
        - id (uuid, primary key)
        - host_id (uuid, references players, not null)
        - sport_id (uuid, references sports, not null)
        - venue_id (uuid, references venues) -- nullable for TBD
        - title (text) -- auto-generated if not provided
        - description (text, max 1000 chars)
        - game_date (date, not null)
        - start_time (time, not null)
        - end_time (time, not null)
        - skill_level_min (integer, 1-5, not null)
        - skill_level_max (integer, 1-5, not null)
        - max_players (integer, not null)
        - current_player_count (integer, default 1) -- includes host
        - cost_per_player (decimal, default 0)
        - venue_cost (decimal) -- total venue booking cost
        - status (text, not null) -- draft, open, full, in_progress, completed, cancelled
        - cancellation_reason (text)
        - notes (text)
        - created_at (timestamptz, default now())
        - updated_at (timestamptz)
        - completed_at (timestamptz)
      </games>

      <game_participants>
        - id (uuid, primary key)
        - game_id (uuid, references games, not null)
        - player_id (uuid, references players, not null)
        - status (text, not null) -- pending, confirmed, cancelled, no_show, completed
        - payment_status (text) -- pending, paid, refunded, forfeited
        - payment_amount (decimal)
        - payment_intent_id (text) -- Stripe payment intent
        - joined_at (timestamptz, default now())
        - approved_at (timestamptz)
        - cancelled_at (timestamptz)
        - cancellation_reason (text)
        - has_rated (boolean, default false)
        - unique constraint (game_id, player_id)
      </game_participants>

      <player_ratings>
        - id (uuid, primary key)
        - game_id (uuid, references games, not null)
        - rater_id (uuid, references players, not null)
        - rated_player_id (uuid, references players, not null)
        - skill_rating (integer, 1-5, not null)
        - reliability_rating (integer, 1-5, not null)
        - sportsmanship_rating (integer, 1-5, not null)
        - comment (text, max 500 chars)
        - created_at (timestamptz, default now())
        - unique constraint (game_id, rater_id, rated_player_id)
      </player_ratings>

      <venue_ratings>
        - id (uuid, primary key)
        - venue_id (uuid, references venues, not null)
        - player_id (uuid, references players, not null)
        - game_id (uuid, references games)
        - rating (integer, 1-5, not null)
        - cleanliness (integer, 1-5)
        - facilities (integer, 1-5)
        - staff (integer, 1-5)
        - comment (text, max 500 chars)
        - images (jsonb) -- array of image URLs
        - created_at (timestamptz, default now())
        - unique constraint (venue_id, player_id, game_id)
      </venue_ratings>

      <notifications>
        - id (uuid, primary key)
        - player_id (uuid, references players, not null)
        - type (text, not null) -- join_request, approved, game_reminder, etc.
        - title (text, not null)
        - message (text, not null)
        - data (jsonb) -- additional context (game_id, etc.)
        - is_read (boolean, default false)
        - created_at (timestamptz, default now())
      </notifications>

      <payments>
        - id (uuid, primary key)
        - player_id (uuid, references players, not null)
        - game_id (uuid, references games, not null)
        - participant_id (uuid, references game_participants, not null)
        - amount (decimal, not null)
        - platform_fee (decimal, not null)
        - net_amount (decimal, not null) -- amount minus fee
        - currency (text, default 'usd')
        - status (text, not null) -- pending, succeeded, failed, refunded
        - stripe_payment_intent_id (text)
        - stripe_charge_id (text)
        - refund_amount (decimal)
        - refund_reason (text)
        - created_at (timestamptz, default now())
        - updated_at (timestamptz)
      </payments>
    </tables>

    <indexes>
      - games: sport_id, venue_id, host_id, game_date, status
      - game_participants: game_id, player_id, status
      - player_sports: player_id, sport_id
      - player_availability: player_id, day_of_week
      - player_ratings: rated_player_id, game_id
      - venue_ratings: venue_id
      - notifications: player_id, is_read, created_at
      - payments: player_id, game_id, status
      - Spatial index on venues (location_lat, location_lng)
      - Spatial index on games via venue location
    </indexes>

    <row_level_security>
      - Players can read all players (public profiles)
      - Players can update only their own profile
      - Players can read all games
      - Only hosts can update/delete their own games
      - Players can see their own participation records
      - Hosts can see all participants for their games
      - Ratings are readable by the rated player only
      - Payment records visible only to the payer
      - Notifications visible only to recipient
    </row_level_security>
  </database_schema>

  <api_endpoints_summary>
    <authentication>
      - POST /api/auth/register - Create new player account
      - POST /api/auth/login - Sign in with email/password
      - POST /api/auth/logout - Sign out current session
      - POST /api/auth/forgot-password - Request password reset
      - POST /api/auth/reset-password - Reset password with token
      - GET /api/auth/me - Get current user profile
    </authentication>

    <players>
      - GET /api/players - List players (with filters)
      - GET /api/players/:id - Get player profile
      - PUT /api/players/:id - Update player profile
      - GET /api/players/:id/stats - Get player statistics
      - GET /api/players/:id/games - Get player's games
      - GET /api/players/:id/ratings - Get player's received ratings
      - POST /api/players/:id/avatar - Upload profile photo
      - DELETE /api/players/:id - Delete account (soft delete)
    </players>

    <player_sports>
      - GET /api/players/:id/sports - Get player's sports
      - POST /api/players/:id/sports - Add sport to player
      - PUT /api/players/:id/sports/:sportId - Update skill level
      - DELETE /api/players/:id/sports/:sportId - Remove sport
    </player_sports>

    <player_availability>
      - GET /api/players/:id/availability - Get availability slots
      - POST /api/players/:id/availability - Add availability slot
      - PUT /api/players/:id/availability/:slotId - Update slot
      - DELETE /api/players/:id/availability/:slotId - Remove slot
      - PUT /api/players/:id/availability/bulk - Bulk update availability
    </player_availability>

    <venues>
      - GET /api/venues - List venues (with location filter)
      - GET /api/venues/:id - Get venue details
      - POST /api/venues - Create new venue
      - PUT /api/venues/:id - Update venue
      - DELETE /api/venues/:id - Delete venue
      - GET /api/venues/:id/sports - Get venue's sports
      - POST /api/venues/:id/sports - Add sport to venue
      - GET /api/venues/:id/games - Get games at venue
      - GET /api/venues/:id/ratings - Get venue ratings
      - POST /api/venues/:id/images - Upload venue images
    </venues>

    <games>
      - GET /api/games - List games (with filters)
      - GET /api/games/:id - Get game details
      - POST /api/games - Create new game
      - PUT /api/games/:id - Update game
      - DELETE /api/games/:id - Cancel/delete game
      - POST /api/games/:id/join - Request to join game
      - POST /api/games/:id/approve/:playerId - Approve join request
      - POST /api/games/:id/reject/:playerId - Reject join request
      - POST /api/games/:id/leave - Leave game
      - POST /api/games/:id/complete - Mark game as completed
      - GET /api/games/:id/participants - Get participants list
      - GET /api/games/recommended - Get recommended games
      - GET /api/games/nearby - Get games near location
    </games>

    <ratings>
      - GET /api/games/:id/ratings - Get ratings for a game
      - POST /api/games/:id/ratings - Submit player ratings
      - GET /api/ratings/pending - Get games pending my ratings
      - POST /api/venues/:id/ratings - Submit venue rating
    </ratings>

    <payments>
      - POST /api/payments/create-intent - Create Stripe payment intent
      - POST /api/payments/confirm - Confirm payment
      - POST /api/payments/refund/:id - Request refund
      - GET /api/payments/history - Get payment history
      - POST /api/webhooks/stripe - Stripe webhook handler
    </payments>

    <notifications>
      - GET /api/notifications - Get user notifications
      - PUT /api/notifications/:id/read - Mark as read
      - PUT /api/notifications/read-all - Mark all as read
      - DELETE /api/notifications/:id - Delete notification
      - GET /api/notifications/unread-count - Get unread count
    </notifications>

    <search>
      - GET /api/search?q=query&type=all|games|players|venues
      - GET /api/search/games - Search games with filters
      - GET /api/search/players - Search players
      - GET /api/search/venues - Search venues
    </search>

    <sports>
      - GET /api/sports - List all available sports
      - GET /api/sports/:id - Get sport details
    </sports>
  </api_endpoints_summary>

  <ui_layout>
    <main_structure>
      - Two-column layout on desktop: sidebar (navigation/filters), main content
      - Single column on mobile with bottom navigation
      - Persistent header with logo, search, notifications, profile
      - Responsive breakpoints: mobile (<768px), tablet (768-1024px), desktop (>1024px)
    </main_structure>

    <sidebar_navigation>
      - Logo and app name
      - Navigation links:
        - Dashboard (home icon)
        - Browse Games (search icon)
        - Create Game (plus icon)
        - My Games (calendar icon)
        - Venues (location icon)
        - Profile (user icon)
      - Collapsible on tablet
      - Hidden on mobile (use bottom nav)
    </sidebar_navigation>

    <mobile_bottom_nav>
      - Home/Dashboard
      - Browse Games
      - Create Game (prominent center button)
      - My Games
      - Profile
    </mobile_bottom_nav>

    <header>
      - Logo (links to dashboard)
      - Global search bar (games, players, venues)
      - Notification bell with unread count
      - User avatar with dropdown menu
      - Mobile: hamburger menu for sidebar
    </header>

    <page_layouts>
      <browse_games_page>
        - Filter bar: sport, date range, skill level, distance
        - Toggle: list view / map view
        - Game cards grid (responsive columns)
        - Pagination or infinite scroll
        - Empty state with CTA to create game
      </browse_games_page>

      <game_detail_page>
        - Hero section: sport icon, title, date/time
        - Key info: venue, skill range, spots remaining
        - Host profile card
        - Participants list with avatars
        - Join button (sticky on mobile)
        - Game description/notes
        - Venue info (if selected)
        - Map showing location
      </game_detail_page>

      <create_game_page>
        - Multi-step form wizard
        - Step indicators
        - Form sections: sport, timing, location, details, pricing
        - Preview before publish
        - Mobile-optimized inputs
      </create_game_page>

      <dashboard_page>
        - Welcome message with player name
        - Quick stats cards (games played, rating, reliability)
        - Upcoming games section (horizontal scroll)
        - Games I'm hosting section
        - Pending actions (approvals, ratings)
        - Recommended games
      </dashboard_page>

      <profile_page>
        - Avatar with edit overlay
        - Name, location, bio
        - Sports with skill badges
        - Stats overview
        - Recent games list
        - Rating display
        - Edit profile button
      </profile_page>

      <venue_detail_page>
        - Photo gallery with lightbox
        - Venue name and rating
        - Address with map
        - Contact information
        - Available sports and pricing
        - Amenities list
        - Recent reviews
        - Upcoming games at venue
      </venue_detail_page>
    </page_layouts>

    <modals_and_overlays>
      - Join game confirmation modal
      - Cancel game confirmation
      - Rate players post-game modal
      - Rate venue modal
      - Payment modal (Stripe Elements)
      - Filter modal (mobile)
      - Player quick view modal
      - Settings modal
    </modals_and_overlays>
  </ui_layout>

  <design_system>
    <color_palette>
      <!-- Primary: Energetic, sporty feel -->
      <primary>hsl(217, 91%, 60%)</primary> <!-- Blue - trust, reliability -->
      <secondary>hsl(142, 76%, 36%)</secondary> <!-- Green - success, go -->
      <accent>hsl(38, 92%, 50%)</accent> <!-- Orange - energy, CTA -->
      <destructive>hsl(0, 84%, 60%)</destructive> <!-- Red - errors, cancel -->
      
      <!-- Sport-specific accents -->
      <basketball>hsl(24, 100%, 50%)</basketball> <!-- Orange -->
      <soccer>hsl(142, 76%, 36%)</soccer> <!-- Green -->
      <tennis>hsl(49, 100%, 50%)</tennis> <!-- Yellow -->
      
      <!-- Neutrals -->
      <background>hsl(0, 0%, 100%)</background>
      <foreground>hsl(222, 47%, 11%)</foreground>
      <muted>hsl(210, 40%, 96%)</muted>
      <border>hsl(214, 32%, 91%)</border>
      
      <!-- Dark mode variants -->
      <dark_background>hsl(222, 47%, 11%)</dark_background>
      <dark_foreground>hsl(210, 40%, 98%)</dark_foreground>
      <dark_muted>hsl(217, 33%, 17%)</dark_muted>
    </color_palette>

    <typography>
      - Font family: Inter, system-ui, sans-serif
      - Headings: font-bold, tracking-tight
      - Body: font-normal, leading-relaxed
      - Small: font-medium, text-sm
      - Display sizes: text-4xl (h1), text-2xl (h2), text-xl (h3), text-lg (h4)
      - Body size: text-base (16px)
    </typography>

    <spacing>
      - Container max-width: 1280px
      - Page padding: p-4 (mobile), p-6 (tablet), p-8 (desktop)
      - Card padding: p-4 to p-6
      - Section spacing: space-y-6 to space-y-8
      - Component gap: gap-2 to gap-4
    </spacing>

    <components>
      <game_card>
        - White background with subtle shadow
        - Sport icon badge (top left)
        - Date/time prominent display
        - Skill level indicator (colored bar)
        - Player count (e.g., "6/10 players")
        - Host avatar (small)
        - Cost badge (if applicable)
        - Hover: lift shadow, highlight
        - Click: navigate to game detail
      </game_card>

      <player_card>
        - Avatar (circular, 48px)
        - Name and location
        - Primary sport badge
        - Rating stars display
        - Skill level for sport context
        - Quick action buttons
      </player_card>

      <skill_badge>
        - Rounded pill shape
        - Color coded by level:
          - 1 (Beginner): gray
          - 2 (Novice): blue
          - 3 (Intermediate): green
          - 4 (Advanced): orange
          - 5 (Expert): red/gold
        - Icon + text label
      </skill_badge>

      <rating_display>
        - 5-star visual (filled/empty)
        - Numeric rating beside stars
        - Review count in muted text
        - Compact variant for cards
      </rating_display>

      <venue_card>
        - Hero image (16:9 aspect)
        - Venue name bold
        - Sports available (icon badges)
        - Distance from user
        - Rating display
        - Price range indicator
      </venue_card>

      <buttons>
        - Primary: Blue background, white text
        - Secondary: Border, transparent bg
        - Accent: Orange background (CTAs)
        - Ghost: No border, hover bg
        - Sizes: sm, default, lg
        - Disabled: 50% opacity
        - Loading: spinner + "Loading..."
      </buttons>

      <inputs>
        - Rounded borders (radius-md)
        - Focus ring (blue)
        - Error state (red border)
        - Helper text below
        - Label above or floating
      </inputs>

      <sport_selector>
        - Toggle buttons for each sport
        - Icon + name
        - Selected state highlighted
        - Multi-select for profile
        - Single-select for game filters
      </sport_selector>

      <availability_calendar>
        - Week view with time slots
        - Drag to select time ranges
        - Color for selected slots
        - Clear button per slot
        - Mobile: time picker per day
      </availability_calendar>

      <map_component>
        - Google Maps / Mapbox integration
        - Custom markers for games/venues
        - Cluster markers at zoom out
        - Info window on marker click
        - "Games near me" radius circle
      </map_component>
    </components>

    <animations>
      - Page transitions: fade (150ms)
      - Card hover: transform scale (100ms)
      - Modal: slide up + fade (200ms)
      - Skeleton loading: pulse animation
      - Success: checkmark animation
      - Error: shake animation
      - Notifications: slide in from right
    </animations>
  </design_system>

  <key_interactions>
    <registration_flow>
      1. Land on homepage with value proposition
      2. Click "Sign Up" button
      3. Enter email and password
      4. Verify email (click link)
      5. Complete profile: name, location, photo
      6. Select sports and skill levels
      7. Set weekly availability (optional, can skip)
      8. Arrive at dashboard with onboarding tips
    </registration_flow>

    <create_game_flow>
      1. Click "Create Game" from nav/dashboard
      2. Select sport from available options
      3. Choose date and time with picker
      4. Set duration
      5. Define skill level range (slider)
      6. Select venue or mark "TBD"
      7. Set max players
      8. Set cost per player (optional)
      9. Add notes/description
      10. Preview game details
      11. Publish game
      12. Arrive at game detail page as host
    </create_game_flow>

    <join_game_flow>
      1. Browse games or search
      2. Click game card to view details
      3. Review game info, host, participants
      4. Click "Request to Join"
      5. Confirm skill level is accurate
      6. Wait for host approval
      7. Receive approval notification
      8. Complete payment (if game has cost)
      9. Receive confirmation email
      10. Game appears in "My Games"
    </join_game_flow>

    <host_approval_flow>
      1. Receive notification of join request
      2. Navigate to game or click notification
      3. View requesting player's profile
      4. Check skill level, rating, reliability
      5. Approve or reject with optional message
      6. On approval, player is prompted to pay
      7. Player appears in participants list
    </host_approval_flow>

    <post_game_rating_flow>
      1. Game marked as completed (auto or manual)
      2. Receive notification to rate players
      3. Open rating modal/page
      4. Rate each participant on 3 dimensions
      5. Add optional text feedback
      6. Submit ratings
      7. Ratings reflected in player profiles
      8. Optional: rate venue
    </post_game_rating_flow>

    <cancellation_flow>
      1. Navigate to game in "My Games"
      2. Click "Cancel" or "Leave Game"
      3. Confirm cancellation
      4. If <24hrs, see refund policy warning
      5. Confirm understanding
      6. Refund processed (if applicable)
      7. Other participants notified
      8. Game status updated or removed
    </cancellation_flow>
  </key_interactions>

  <implementation_steps>
    <week_1>
      <title>Project Setup and Authentication</title>
      <tasks>
        - Initialize Next.js 14 project with TypeScript
        - Configure Tailwind CSS and shadcn/ui
        - Set up Supabase project and connection
        - Create database schema migration
        - Enable Row Level Security policies
        - Implement authentication (register, login, logout)
        - Build auth context and protected route wrapper
        - Create basic layout components (header, nav, footer)
        - Deploy initial version to Vercel
      </tasks>
    </week_1>

    <week_2>
      <title>Player Profiles and Sports Setup</title>
      <tasks>
        - Build player profile page (view and edit)
        - Implement profile photo upload
        - Create sport selection component
        - Build skill level selector with descriptions
        - Implement player sports CRUD
        - Create weekly availability calendar component
        - Build player availability management
        - Add location search/autocomplete
        - Create player card component
      </tasks>
    </week_2>

    <week_3>
      <title>Game Lobby - Browse and Create</title>
      <tasks>
        - Build game listing page with cards
        - Implement filters (sport, date, skill, location)
        - Create game detail page
        - Build create game form wizard
        - Implement game CRUD endpoints
        - Add date/time picker components
        - Create skill range selector
        - Build venue selector (dropdown)
        - Implement game status management
      </tasks>
    </week_3>

    <week_4>
      <title>Game Participation Flow</title>
      <tasks>
        - Implement join game request flow
        - Build host approval/rejection system
        - Create participant management UI
        - Add leave game functionality
        - Build game completion flow
        - Create "My Games" dashboard section
        - Implement game reminders (email)
        - Add pending approvals notifications
        - Build waitlist functionality (if time)
      </tasks>
    </week_4>

    <week_5>
      <title>Payments Integration</title>
      <tasks>
        - Set up Stripe Connect account
        - Implement payment intent creation
        - Build Stripe Elements payment form
        - Create webhook handler for payment events
        - Implement refund logic
        - Build payment history page
        - Add platform fee calculation
        - Create payment confirmation emails
        - Test full payment flow
      </tasks>
    </week_5>

    <week_6>
      <title>Rating System</title>
      <tasks>
        - Build post-game rating prompt
        - Create player rating modal/page
        - Implement rating submission API
        - Build rating aggregation logic
        - Update player profiles with ratings
        - Create venue rating system
        - Build "Games to Rate" list
        - Implement rating display components
        - Add reliability score calculation
      </tasks>
    </week_6>

    <week_7>
      <title>Venues and Polish</title>
      <tasks>
        - Build venue registration flow
        - Create venue listing page
        - Build venue detail page
        - Implement venue search by location
        - Add venue photo gallery
        - Create venue ratings display
        - Build basic venue dashboard
        - Add map integration for venues
        - Polish responsive design
      </tasks>
    </week_7>

    <week_8>
      <title>Final Polish and Launch Prep</title>
      <tasks>
        - Comprehensive mobile testing
        - Accessibility audit and fixes
        - Performance optimization
        - Error handling improvements
        - Loading states and skeletons
        - Empty states design
        - PWA configuration
        - SEO meta tags
        - Create seed data for demo
        - Beta user onboarding
        - Production deployment
      </tasks>
    </week_8>
  </implementation_steps>

  <success_criteria>
    <functionality>
      - Users can register, verify email, complete profile
      - Players can set sports, skill levels, availability
      - Games can be created, browsed, filtered, joined
      - Host approval workflow functions correctly
      - Payments process successfully via Stripe
      - Ratings can be submitted post-game
      - Venues can register and be selected for games
      - Notifications delivered via email
    </functionality>

    <user_experience>
      - Pages load in under 2 seconds
      - Mobile experience is native-like
      - Forms have clear validation feedback
      - Navigation is intuitive on all devices
      - Error states are helpful and actionable
      - Empty states guide users to take action
    </user_experience>

    <business_metrics>
      - 100+ players registered
      - 5+ venues onboarded
      - 20+ games created per week
      - 70%+ game fill rate
      - 60%+ rating completion rate
      - Less than 5% API error rate
    </business_metrics>

    <technical_quality>
      - TypeScript strict mode with no errors
      - Row Level Security on all tables
      - All API endpoints require authentication where needed
      - Input validation on client and server
      - Responsive design tested on common devices
      - Core Web Vitals in green range
    </technical_quality>
  </success_criteria>

  <future_phases>
    <phase_2_enhanced_matching>
      - Smart game suggestions algorithm
      - Push notifications
      - Waitlist with auto-promotion
      - One-click recurring games
      - Calendar integration (Google/Apple)
      - Friend/favorite players feature
    </phase_2_enhanced_matching>

    <phase_3_gamification>
      - Detailed player stats dashboard
      - Achievement badges
      - Local leaderboards
      - Skill progression tracking
      - Verified skill levels
    </phase_3_gamification>

    <phase_4_venue_marketplace>
      - Venue bidding system
      - Premium venue listings
      - Integrated booking system
      - Equipment rental add-ons
    </phase_4_venue_marketplace>

    <phase_5_teams_and_leagues>
      - Permanent team creation
      - Team management
      - League and tournament system
      - In-app messaging
      - Social feed
    </phase_5_teams_and_leagues>
  </future_phases>
</project_specification>